function toFirstPage(){$(document.body).empty(),$(document.body).append($('\n        <div id="QUESTS" style="float:left; width:100vw; height: 100vh">\n        <table style="width:100vw;">\n            <thead>\n                <tr>\n                    <th colspan="6">公開任務清單</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr align="center">\n                    <td>任務難度</td>\n                    <td>任務名稱</td>\n                    <td>任務說明</td>\n                    <td>任務獎勵</td>\n                    <td></td>\n                    <td>是否完成</td>\n                </tr>\n            </tbody>\n        </table>\n        </div>\n        <div class="asideMenu">\n            <button class="btn"><i class="fas fa-chevron-right fa-2x"></i></button>\n            <div  id="SLIDEINFO" >\n            <div class="title">功能表單</div>\n            <div class="list">\n            <div align="left" style="margin-top:10vh">\n                <h2>登入畫面</h2>\n                <br>\n                <p style="font-size:20px;">帳號</p>\n                <input style="width:200px;font-size:16px;" id="UNAME" type="text"/>\n                <p style="font-size:20px;">密碼</p>\n                <input type="password" style="width:200px;font-size:16px;" id="PASSWORD" type="text"/>\n                <br><br>\n                <input value="確認" type="submit" onclick="LOGIN()"/>\n                <p id="wrongpw" style="color: red; display: none">Wrong password</p>\n            </div>\n            </div>\n            </div>\n            </div>\n        </div>\n        \n        ')),$(function(){$(".asideMenu").toggleClass("active"),$(".btn").click(function(){$(".asideMenu").toggleClass("active"),$(".fa-chevron-right").toggleClass("rotate")})})}function loadQUESTS(t){for(var n of(BEGIN='\n    <table style="width:100vw;">\n        <thead>\n            <tr>\n                <th colspan="6">公開任務清單</th>\n            </tr>\n        </thead>\n        <tbody>\n        <tr align="center">\n            <td style="color:yellow">任務類型</td>\n            <td style="color:yellow">任務名稱</td>\n            <td style="color:yellow">任務說明</td>\n            <td style="color:yellow">任務獎勵</td>\n            <td></td>\n            <td style="color:yellow">是否完成</td>\n        </tr>',END="</tbody></table>",questCODE="",questCODE+=BEGIN,t)){let t="red",e="未完成",o="";n.FINISHED&&(o=`arg1="已完成玩家" arg2="${n.PEOPLE.join("、")}" onclick="showMore(this)"`,t="green",e=`由${n.FINISHEDBY}完成`),questCODE+=`\n        <tr align="center">\n            <td>${n.MTYPE}</td>\n            <td>${n.QNAME}</td>\n            <td arg1="${n.QNAME}" arg2="${n.LONGEXPLAIN}" onclick="showMore(this)">${n.EXPLAIN}...(點擊獲得更多資訊)</td>\n            <td>${n.PRICE}</td>\n            <td><button id="${n.QNAME}" style="background-color:green;color:white;" onclick="submitQuest(this)">繳交任務</button></td>\n            <td ${o} style="background-color:${t};">${e}</td>\n        </tr>`}questCODE+=END,$("#QUESTS").empty(),$("#QUESTS").append(questCODE)}function sessionLOGIN(){$("#SLIDEINFO").empty(),$("#SLIDEINFO").append(`\n    <div class="title">功能表單</div>\n    <div class="list">\n    <div align="left" style="margin-top:10vh">\n        <h2>#${UserINFO.JOB}# <br><br> ${UserINFO.CNAME}<br>歡迎回來</h2>\n        <br>\n        完成專屬任務：\n        <input type="password" style="width:200px;font-size:12px;" id="CDKEY" />\n        <br><br>\n        <input value="輸入任務密鑰" type="submit" onclick="SendCDKEY()"/>\n    </div>\n    </div>\n    `)}function FetchINFO(){axios.get("/FetchINFO").then(t=>{null!=t.data.UNAME&&(UserINFO={UNAME:t.data.UNAME,CNAME:t.data.CNAME,JOB:t.data.JOB},sessionLOGIN())})}function FetchQUESTS(){axios.get("/QUESTS").then(t=>{QuestINFO=t.data,loadQUESTS(QuestINFO)}),socket=io("#"),socket.on("BROADCAST",t=>{alert(t),window.location.reload()}),socket.on("CELEBRATION",t=>{alert(t)})}function LOGIN(){let t=$("#UNAME").val(),n=$("#PASSWORD").val();axios.post("/",{TYPE:"LOGIN",UNAME:t,PASSWORD:n}).then(t=>{t.data?window.location.reload():$("#wrongpw").css("display","block")})}function submitQuest(t){if(null==UserINFO.CNAME)alert("請先登入");else{let n=prompt("請輸入該任務的密鑰：");axios.post("/",{TYPE:"QUEST",QNAME:$(t).attr("id"),CDKEY:n,PLAYERNAME:UserINFO.CNAME}).then(t=>{null!=t.data.CDKEY?prompt(t.data.msg,t.data.CDKEY):alert(t.data.msg),window.location.reload()})}}function showMore(t){swal($(t).attr("arg1"),$(t).attr("arg2"),"info")}function SendCDKEY(){axios.post("/",{TYPE:"ChangeJOB",JOB:UserINFO.JOB,CDKEY:$("#CDKEY").val(),PLAYERNAME:UserINFO.CNAME}).then(t=>{alert(t.data.msg),window.location.reload()})}